<section id="register-container">
	<div class="logo-section">
		<div class="welcome-text">Junte-se a nós</div>
		<div class="simple-logo">
			<div class="logo-grid">
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
				<div class="logo-dot"></div>
			</div>
		</div>
		<h1>Cadastrar</h1>
		<div class="subtitle">Crie sua conta para começar</div>
	</div>

	<div class="form-section">
		<div class="form-container">
			<mat-card>
				<mat-card-content>
					<form [formGroup]="form" (ngSubmit)="onSubmit()" class="row">
						<mat-form-field appearance="outline" class="col-12">
							<mat-label>Tipo de usuário</mat-label>
							<mat-select formControlName="userType">
								@for (option of userTypeOptions; track option.value) {
								<mat-option [value]="option.value">
									{{ option.label }}
								</mat-option>
								}
							</mat-select>
							@if (hasFieldError('userType')) {
							<mat-error>
								{{ getFieldError('userType') }}
							</mat-error>
							}
						</mat-form-field>

						<mat-form-field appearance="outline" class="col-12">
							<mat-label>Nome de usuário</mat-label>
							<input matInput type="text" formControlName="username" autocomplete="username" />
							@if (hasFieldError('username')) {
							<mat-error>
								{{ getFieldError('username') }}
							</mat-error>
							}
						</mat-form-field>

						<mat-form-field appearance="outline" class="col-12 col-md-6">
							<mat-label>E-mail</mat-label>
							<input matInput type="email" formControlName="email" autocomplete="email" />
							@if (hasFieldError('email')) {
							<mat-error>
								{{ getFieldError('email') }}
							</mat-error>
							}
						</mat-form-field>

						<mat-form-field appearance="outline" class="col-12 col-md-6">
							<mat-label>Telefone</mat-label>
							<input 
								matInput 
								type="tel" 
								formControlName="phone" 
								autocomplete="tel" 
								placeholder="(11) 99999-9999"
								mask="(00) 00000-0000"
								[dropSpecialCharacters]="false"
							/>
							@if (hasFieldError('phone')) {
							<mat-error>
								{{ getFieldError('phone') }}
							</mat-error>
							}
						</mat-form-field>

						<mat-form-field appearance="outline" class="col-12">
							<mat-label>Senha</mat-label>
							<input
								matInput
								[type]="hidePassword() ? 'password' : 'text'"
								formControlName="password"
								autocomplete="new-password"
							/>
							<button mat-icon-button matSuffix type="button" (click)="togglePasswordVisibility()">
								<mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
							</button>
							@if (hasFieldError('password')) {
							<mat-error>
								{{ getFieldError('password') }}
							</mat-error>
							}
						</mat-form-field>

						<button
							mat-raised-button
							color="primary"
							type="submit"
							class="register-button"
							[disabled]="form.invalid || isLoading()"
						>
							@if (!isLoading()) {
							<span class="button-content">
								<span>Criar Conta</span>
								<mat-icon>arrow_forward</mat-icon>
							</span>
							}
							@if (isLoading()) {
							<mat-spinner diameter="20" class="spinner"></mat-spinner>
							}
						</button>

						<div class="login-link">
							<p>Já possui uma conta? <a routerLink="/login">Faça login</a></p>
						</div>
					</form>
				</mat-card-content>
			</mat-card>
		</div>
	</div>
</section>
